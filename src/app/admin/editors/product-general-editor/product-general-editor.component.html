<div class="editor-container" *ngIf="form">
  <header class="editor-header">
    <div class="header-content">
      <h1>Editor de Producto General</h1>
      <p>Gestiona el encabezado, la lista de productos y la secci√≥n de informaci√≥n inferior.</p>
    </div>
    <div class="action-buttons">
      <button class="btn btn-secondary" (click)="resetForm()" type="button">
        <span>üîÑ</span> Revertir
      </button>
      <button class="btn btn-primary" (click)="saveChanges()" type="button">
        <span>üíæ</span> Guardar Cambios
      </button>
    </div>
  </header>

  <form [formGroup]="form">
    <mat-tab-group animationDuration="300ms" [dynamicHeight]="true">
    <mat-tab label="Header">
      <mat-card class="tab-card">
        <div class="section-content" formGroupName="headerData">
          <div class="form-group">
            <label>T√≠tulo Principal</label>
            <input type="text" formControlName="titulo" placeholder="Ej: BROCAS TRIC√ìNICAS" />
          </div>
          <div class="form-group">
            <label>Descripci√≥n</label>
            <textarea formControlName="descripcion" rows="3" placeholder="Descripci√≥n del encabezado"></textarea>
          </div>
          <div class="form-group">
            <label>Breadcrumbs (Migas de Pan)</label>
            <div class="item-list mt-2" formArrayName="breadcrumbs">
              <div *ngFor="let _ of breadcrumbsArray.controls; let i = index; trackBy: trackByIndex" class="dynamic-input">
                <input type="text" [formControlName]="i" placeholder="Ej: PRODUCTOS" />
                <button class="btn-delete" type="button" (click)="removeBreadcrumb(i)">üóëÔ∏è</button>
              </div>
              <button class="btn-add" type="button" (click)="addBreadcrumb()">+ A√±adir Miga</button>
            </div>
          </div>
        </div>
      </mat-card>
    </mat-tab>

    <mat-tab label="Secci√≥n de Informaci√≥n">
      <mat-card class="tab-card">
        <div class="section-content" formGroupName="infoSection">
          <div class="form-group">
            <label>Texto Informativo</label>
            <textarea formControlName="texto" rows="4" placeholder="Texto de la secci√≥n inferior"></textarea>
          </div>
          <div class="grid-2" formGroupName="boton">
            <div class="form-group">
              <label>Etiqueta Bot√≥n</label>
              <input type="text" formControlName="label" placeholder="Ej: CONT√ÅCTANOS" />
            </div>
            <div class="form-group">
              <label>Link Bot√≥n</label>
              <input type="text" formControlName="link" placeholder="Ej: #" />
            </div>
          </div>
        </div>
      </mat-card>
    </mat-tab>

    <mat-tab label="Productos">
      <mat-card class="tab-card">
        <div class="section-header">
          <h3>Lista de Productos</h3>
          <button class="btn-add" type="button" (click)="addProduct()">+ A√±adir Producto</button>
        </div>
        <div class="section-content" formArrayName="products">
          <div class="products-admin-grid" >
            <div *ngFor="let _ of productsArray.controls; let i = index; trackBy: trackByIndex" class="product-admin-card" [formGroupName]="i">
              <div class="card-admin-header">
                <span>Producto #{{ i + 1 }}</span>
                <button class="btn-delete" type="button" (click)="removeProduct(i)">üóëÔ∏è</button>
              </div>
              <div class="form-group">
                <label>T√≠tulo</label>
                <input type="text" formControlName="title" placeholder="Nombre del producto" />
              </div>
              <div class="form-group">
                <label>Imagen (URL/Ruta)</label>
                <input type="text" formControlName="image" placeholder="Ej: assets/products/bit1.png" />
              </div>
              <div class="form-group">
                <label>Link</label>
                <input type="text" formControlName="link" placeholder="Ruta de destino" />
              </div>
            </div>
          </div>
        </div>
      </mat-card>
    </mat-tab>
    </mat-tab-group>
  </form>

  <div class="success-toast" [class.show]="showSuccessMessage">
    <span>‚úÖ</span> ¬°Cambios guardados correctamente!
  </div>
</div>
