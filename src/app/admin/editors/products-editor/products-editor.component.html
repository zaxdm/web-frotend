<div class="editor-container">
  <h2>ğŸ›  Editor de Producto</h2>

  <mat-tab-group animationDuration="300ms" [dynamicHeight]="true">

    <!-- TAB: Principal -->
    <mat-tab label="Principal">
      <label>TÃ­tulo</label>
      <input [(ngModel)]="product.title" matInput>

      <label>SubtÃ­tulo</label>
      <input [(ngModel)]="product.subtitle" matInput>

      <label>Imagen principal</label>
      <input [(ngModel)]="product.mainImage" matInput>

      <label>Link contacto</label>
      <input [(ngModel)]="product.contactLink" matInput>
    </mat-tab>

    <!-- TAB: Descripciones -->
    <mat-tab label="Descripciones">
      <div *ngFor="let d of product.descriptions; let i = index; trackBy: trackByIndex" class="item-row">
        <input [(ngModel)]="product.descriptions[i]" matInput>
        <button mat-button color="warn" (click)="removeDescription(i)">âŒ</button>
    </div>
      <button mat-button (click)="addDescription()">+ Agregar descripciÃ³n</button>
    </mat-tab>

    <!-- TAB: Thumbnails -->
    <mat-tab label="Thumbnails">
      <div *ngFor="let t of product.thumbnails; let i = index; trackBy: trackByIndex" class="item-row">
  <input [(ngModel)]="product.thumbnails[i]" matInput>
  <button mat-button color="warn" (click)="removeThumbnail(i)">âŒ</button>
</div>
      <button mat-button (click)="addThumbnail()">+ Agregar imagen</button>
    </mat-tab>

    <!-- TAB: Features -->
    <mat-tab label="Features">
      <div *ngFor="let f of product.features || []; let i = index" class="item-row">
        <input placeholder="TÃ­tulo" [(ngModel)]="product.features![i].title" matInput>
        <input placeholder="DescripciÃ³n" [(ngModel)]="product.features![i].description" matInput>
        <button mat-button color="warn" (click)="removeFeature(i)">âŒ</button>
      </div>
      <button mat-button (click)="addFeature()">+ Agregar feature</button>
    </mat-tab>

    <!-- TAB: Descargables -->
    <mat-tab label="Descargables">
      <div *ngFor="let d of product.downloads || []; let i = index" class="item-row">
        <input placeholder="TÃ­tulo" [(ngModel)]="product.downloads![i].title" matInput>
        <input placeholder="DescripciÃ³n" [(ngModel)]="product.downloads![i].description" matInput>
        <div class="upload-row">
          <input type="file" accept="application/pdf" (change)="onFileSelected(i, $event)">
          <div class="dropzone" (dragover)="onDragOver($event)" (drop)="onDropFile(i, $event)">
            Arrastra aquÃ­ el PDF
          </div>
          <div class="filename">{{ fileName(i) }}</div>
        </div>
        <button mat-button color="warn" (click)="removeDownload(i)">âŒ</button>
      </div>
      <button mat-button (click)="addDownload()">+ Agregar descargable</button>
    </mat-tab>

  </mat-tab-group>

  <hr>
    <div class="action-bar" style="margin-top: 1rem;">
      <button type="button" class="btn btn-secondary" (click)="resetForm()">
        <span>â†º</span>
        Cancelar
      </button>
      <button type="button" class="btn btn-primary" (click)="save()">
        <span>ğŸ’¾</span>
        Guardar cambios
      </button>
    </div>

</div>
  <div class="notification" *ngIf="showSuccessMessage">
    <span>âœ…</span>
    <span>Producto actualizado correctamente</span>
  </div>
